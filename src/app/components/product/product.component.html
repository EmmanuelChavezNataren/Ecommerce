<ion-card>
  <div *ngIf="skeleton; then skeletonBlock else productsBlock"></div>
  <ng-template #skeletonBlock>
    <ion-item lines="none">
      <ion-label class="label-seleton">
        <p class="brand"><ion-skeleton-text animated style="width: 40%"></ion-skeleton-text></p>
        <h2 class="product-name"><ion-skeleton-text animated style="width: 80%"></ion-skeleton-text></h2>
      </ion-label>
    </ion-item>
    <ion-card-content>
      <div class="cont-skeleton-image">
        <ion-skeleton-text animated></ion-skeleton-text>
      </div>              
      <p class="product-price"><ion-skeleton-text animated style="width: 50%"></ion-skeleton-text></p>
      <p class="product-price"><ion-skeleton-text animated style="width: 40%"></ion-skeleton-text></p>
    </ion-card-content>
  </ng-template>
  <ng-template #productsBlock>
    <ion-item lines="none">
      <ion-label>
        <p class="brand">{{product.brand}}</p>
        <h2 class="product-name" (click)="detail()">{{product.product_name}}</h2>
      </ion-label>
      <ion-icon name="heart-circle" class="icon-favorite" [ngClass]="product.is_favorite ? 'is-favorite' : 'is-not-favorite'"></ion-icon>
    </ion-item>        
    <ion-card-content>
      <div class="cont-image" (click)="detail()">
        <div class="cont-triangle">
          <div class="triangle"></div>
        </div>       
        <div class="product-image" [ngStyle]="{'background-image': 'url(' + product.product_image + ')' }"></div>
      </div>
      <p class="product-price" (click)="detail()">{{ getRealPrice(product.product_price, product.discount) | currency }}</p>
      <div class="cont-stars">
        <ion-icon [name]="product.score >= 1 ? 'star' : 'star-outline'" class="rating"></ion-icon>
        <ion-icon [name]="product.score >= 2 ? 'star' : 'star-outline'" class="rating"></ion-icon>
        <ion-icon [name]="product.score >= 3 ? 'star' : 'star-outline'" class="rating"></ion-icon>
        <ion-icon [name]="product.score >= 4 ? 'star' : 'star-outline'" class="rating"></ion-icon>
        <ion-icon [name]="product.score >= 5 ? 'star' : 'star-outline'" class="rating"></ion-icon>
      </div>
      <div class="cont-selected-button" *ngIf="showProductOptions">
        <ion-button fill="clear" (click)="showActions(product.id)">
          <ion-icon slot="icon-only" name="add" color="light" class="icon-plus"></ion-icon>
        </ion-button>
      </div>
    </ion-card-content>
    <div class="cont-selected" [hidden]="selectedProduct != product.id">
      <div class="cont-one">
        <ion-item lines="none" >
          <ion-label>
          </ion-label>
          <div>
            <ion-icon name="chevron-down" class="icon-hide" color="medium" (click)="hideActions()"></ion-icon>
          </div>
        </ion-item>
        <p class="ion-text-center add-favorites" (click)="setFavorite()">
            <span *ngIf="product.is_favorite; else notFavorite">Quitar de favoritos</span>   
          <ng-template #notFavorite>
            <span>Agregar a favoritos</span> 
          </ng-template>
        </p>
      </div>
      <div class="cont-two">              
        <img src="./assets/icon/add_cart.svg" class="ico-add-cart" (click)="addToCart()">
        <p class="ion-text-center add-cart" (click)="addToCart()">Agregar al carrito</p>
      </div>
    </div>
  </ng-template> 
</ion-card>
